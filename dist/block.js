(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?t(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function r(t,n,r){return(n=function(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===e(n)?n:String(n)}(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}var o=wp.blocks.registerBlockType,c=wp.blockEditor.InspectorControls,a=wp.components,l=a.PanelBody,i=a.ToggleControl,u=wp.element.useEffect;o("custom-miusage-block/miusage-block",{title:"Varun Miusage Block",icon:"smiley",category:"common",attributes:{content:{type:"array",default:values.varun_content},columnVisibility:{type:"object",default:{}}},edit:function(e){var t=e.attributes,o=e.setAttributes,a=t.content,s=t.columnVisibility;return u((function(){fetch("/wp-admin/admin-ajax.php?action=varun_content_api_fetch",{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((function(e){o({content:e})})).catch((function(e){return console.error("Error:",e)}))}),[]),React.createElement(React.Fragment,null,React.createElement(c,null,React.createElement(l,{title:"Column Visibility"},a.data.headers.map((function(e,t){return React.createElement(i,{key:e,label:"Show ".concat(e),checked:s[e],onChange:function(){return function(e,t){var c;o({columnVisibility:n(n({},s),{},(c={},r(c,e,!s[e]),r(c,t,!s[t]),c))})}(e,t+1)}})})))),m(a,s))},save:function(e){var t=e.attributes,n=t.content,r=t.columnVisibility;return m(n,r)}});var m=function(e,t){return React.createElement("div",{className:"varun_miusage"},React.createElement("h1",null,e.title),React.createElement("table",null,React.createElement("thead",null,React.createElement("tr",null,e.data.headers.map((function(e,n){return t[e]&&React.createElement("th",{key:e},e)})))),React.createElement("tbody",null,Object.values(e.data.rows).map((function(e,n){return React.createElement("tr",{key:e.id},t[1]&&React.createElement("td",null,e.id),t[2]&&React.createElement("td",null,e.fname),t[3]&&React.createElement("td",null,e.lname),t[4]&&React.createElement("td",null,e.email),t[5]&&React.createElement("td",null,new Date(1e3*e.date).toDateString()))})))))}})();